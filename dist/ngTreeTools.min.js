"use strict";angular.module("ngTreeTools",[]).service("TreeTools",function(){return{find:function(r,n,t){var e=_.defaults(t,{limit:1}),i=this.parents(r,n,e);return _.isArray(i)?_.last(i):void 0},flatten:function(r){var n=[];return function r(t){t.forEach(function(t){n.push(t),t.children&&t.children.length&&r(t.children)})}(_.castArray(r)),n},parents:function(r,n,t){var e=_.matches(n),i=[],c=_.defaults(t,{childNode:["children"]});c.childNode=_.castArray(c.childNode);return function r(n){var t=_.find(n,e);return t?(i.unshift(t),!0):n.some(function(n){var t=!1;return c.childNode.some(function(e){if(n[e]&&r(n[e]))return i.unshift(n),t=!0,!0}),t})}(_.castArray(r)),i},children:function(r,n,t){n&&_.matches(n);var e=_.defaults(t,{childNode:["children"]});e.childNode=_.castArray(e.childNode);var i=[];return function r(n,t){t>0&&i.push(n),e.childNode.some(function(e){if(n[e])return n[e].forEach(function(n){r(n,t+1)}),!0})}(n?treeTools.find(r,n):r,0),i},hasChildren:function(r,n){return _.defaults(n,{childNode:["children"]}).childNode.some(function(n){return r[n]&&_.isArray(r[n])&&r[n].length})},sortBy:function(r,n){var t=this;return _.isArray(r)||(r=[r]),r.forEach(function(r){return _(r).keys().forEach(function(e){_.isArray(r[e])&&(r[e]=t.sortBy(r[e],n))})}),_.sortBy(r,n)}}});