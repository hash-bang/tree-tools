"use strict";angular.module("ngTreeTools",[]).service("TreeTools",function(){return{find:function(r,n,t){var i=_.defaults(t,{limit:1}),e=this.parents(r,n,i);return _.isArray(e)?_.last(e):void 0},flatten:function(r){var n=[];return function r(t){t.forEach(function(t){n.push(t),t.children&&t.children.length&&r(t.children)})}(_.castArray(r)),n},parents:function(r,n,t){var i=_.isFunction(n)?_.noop:_.matches(n),e=[],o=_.defaults(t,{childNode:["children"]});o.childNode=_.castArray(o.childNode);return function r(t){var c=_.find(t,_.isFunction(n)?n:i);return c?(e.unshift(c),!0):t.some(function(n){var t=!1;return o.childNode.some(function(i){if(n[i]&&_.isArray(n[i])&&r(n[i]))return e.unshift(n),t=!0,!0}),t})}(_.castArray(r)),e},children:function(r,n,t){n&&_.matches(n);var i=_.defaults(t,{childNode:["children"]});i.childNode=_.castArray(i.childNode);var e=[];return function r(n,t){t>0&&e.push(n),i.childNode.some(function(i){if(n[i]&&_.isArray(n[i]))return n[i].forEach(function(n){r(n,t+1)}),!0})}(n?treeTools.find(r,n):r,0),e},hasChildren:function(r,n){return _.defaults(n,{childNode:["children"]}).childNode.some(function(n){return r[n]&&_.isArray(r[n])&&r[n].length})},sortBy:function(r,n){var t=this;return _.isArray(r)||(r=[r]),r.forEach(function(r){return _(r).keys().forEach(function(i){_.isArray(r[i])&&(r[i]=t.sortBy(r[i],n))})}),_.sortBy(r,n)}}});