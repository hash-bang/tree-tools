"use strict";angular.module("ngTreeTools",[]).service("TreeTools",function(){return{find:function(r,n,i){var t=_.defaults(i,{limit:1}),e=this.parents(r,n,t);return _.isArray(e)?_.last(e):void 0},flatten:function(r,n){var i=_.defaults(n,{childNode:["children"]});i.childNode=_.castArray(i.childNode);var t=[];return function r(n){n.forEach(function(n){t.push(n),i.childNode.some(function(i){n[i]&&_.isArray(n[i])&&r(n[i])})})}(_.castArray(r)),t},parents:function(r,n,i){var t=_.isFunction(n)?_.noop:_.matches(n),e=[],o=_.defaults(i,{childNode:["children"]});o.childNode=_.castArray(o.childNode);return function r(i){var c=_.find(i,_.isFunction(n)?n:t);return c?(e.unshift(c),!0):i.some(function(n){var i=!1;return o.childNode.some(function(t){if(n[t]&&_.isArray(n[t])&&r(n[t]))return e.unshift(n),i=!0,!0}),i})}(_.castArray(r)),e},children:function(r,n,i){n&&_.matches(n);var t=_.defaults(i,{childNode:["children"]});t.childNode=_.castArray(t.childNode);var e=[];return function r(n,i){i>0&&e.push(n),t.childNode.some(function(t){if(n[t]&&_.isArray(n[t]))return n[t].forEach(function(n){r(n,i+1)}),!0})}(n?treeTools.find(r,n):r,0),e},hasChildren:function(r,n){return _.defaults(n,{childNode:["children"]}).childNode.some(function(n){return r[n]&&_.isArray(r[n])&&r[n].length})},sortBy:function(r,n){var i=this;return _.isArray(r)||(r=[r]),r.forEach(function(r){return _(r).keys().forEach(function(t){_.isArray(r[t])&&(r[t]=i.sortBy(r[t],n))})}),_.sortBy(r,n)}}});