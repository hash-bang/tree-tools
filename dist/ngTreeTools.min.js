"use strict";angular.module("ngTreeTools",[]).service("TreeTools",function(){return{find:function(n,r,t){var i=_.defaults(t,{limit:1}),e=this.parents(n,r,i);return _.isArray(e)?_.last(e):void 0},flatten:function(n){var r=[];return function n(t){t.forEach(function(t){r.push(t),t.children&&t.children.length&&n(t.children)})}(_.castArray(n)),r},parents:function(n,r,t){var i=_.isFunction(r)?_.noop:_.matches(r),e=[],o=_.defaults(t,{childNode:["children"]});o.childNode=_.castArray(o.childNode);return function n(t){var c=_.find(t,_.isFunction(r)?r:i);return c?(e.unshift(c),!0):t.some(function(r){var t=!1;return o.childNode.some(function(i){if(r[i]&&n(r[i]))return e.unshift(r),t=!0,!0}),t})}(_.castArray(n)),e},children:function(n,r,t){r&&_.matches(r);var i=_.defaults(t,{childNode:["children"]});i.childNode=_.castArray(i.childNode);var e=[];return function n(r,t){t>0&&e.push(r),i.childNode.some(function(i){if(r[i])return r[i].forEach(function(r){n(r,t+1)}),!0})}(r?treeTools.find(n,r):n,0),e},hasChildren:function(n,r){return _.defaults(r,{childNode:["children"]}).childNode.some(function(r){return n[r]&&_.isArray(n[r])&&n[r].length})},sortBy:function(n,r){var t=this;return _.isArray(n)||(n=[n]),n.forEach(function(n){return _(n).keys().forEach(function(i){_.isArray(n[i])&&(n[i]=t.sortBy(n[i],r))})}),_.sortBy(n,r)}}});